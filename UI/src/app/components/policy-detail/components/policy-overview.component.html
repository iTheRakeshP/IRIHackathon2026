<div class="rounded-xl border border-slate-200 bg-white">
  <div class="flex flex-col">
    <!-- Basic Information -->
    <div class="px-6 py-5">
      <h4 class="mb-4 flex items-center gap-2 text-base font-semibold text-slate-800">
        <mat-icon class="text-indigo-500 !text-xl !w-5 !h-5">info</mat-icon>
        Basic Information
      </h4>
      <div class="grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4">
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Issue Date</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatDate(policy.issueDate) }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Policy Type</span>
          <span class="text-[15px] font-medium text-slate-700">{{ policy.productType || 'N/A' }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Carrier</span>
          <span class="text-[15px] font-medium text-slate-700">{{ policy.carrier || 'N/A' }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Product Name</span>
          <span class="text-[15px] font-medium text-slate-700">{{ policy.productName || 'N/A' }}</span>
        </div>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Account Values -->
    <div class="px-6 py-5">
      <h4 class="mb-4 flex items-center gap-2 text-base font-semibold text-slate-800">
        <mat-icon class="text-indigo-500 !text-xl !w-5 !h-5">account_balance_wallet</mat-icon>
        Account Values
      </h4>
      <div class="grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4">
        <div class="flex flex-col gap-1 rounded-lg border border-indigo-100 bg-indigo-50/60 p-3">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Contract Value</span>
          <span class="text-xl font-semibold text-indigo-600">{{ formatCurrency(policy.contractValue) }}</span>
        </div>
        <div class="flex flex-col gap-1 rounded-lg border border-indigo-100 bg-indigo-50/60 p-3">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Account Value</span>
          <span class="text-xl font-semibold text-indigo-600">{{ formatCurrency(policy.accountValue) }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Cash Surrender Value</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatCurrency(policy.cashSurrenderValue) }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Death Benefit</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatCurrency(policy.deathBenefit) }}</span>
        </div>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Surrender Schedule -->
    <div class="px-6 py-5">
      <h4 class="mb-4 flex items-center gap-2 text-base font-semibold text-slate-800">
        <mat-icon class="text-indigo-500 !text-xl !w-5 !h-5">schedule</mat-icon>
        Surrender Schedule
      </h4>
      <div class="grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4">
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Current Surrender Charge</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatPercentage(policy.currentSurrenderCharge) }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Surrender End Date</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatDate(policy.surrenderEndDate) }}</span>
        </div>
        <div class="col-span-full flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Status</span>
          <span class="inline-block w-fit rounded px-3 py-1 text-[13px] font-medium"
                [ngClass]="getSurrenderStatus().includes('days') ? 'bg-orange-50 text-orange-700' : 'bg-green-50 text-green-700'">
            {{ getSurrenderStatus() }}
          </span>
        </div>
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Renewal Terms -->
    @if (policy.renewalDays !== undefined && policy.renewalDays !== null) {
      <div class="px-6 py-5">
        <h4 class="mb-4 flex items-center gap-2 text-base font-semibold text-slate-800">
          <mat-icon class="text-indigo-500 !text-xl !w-5 !h-5">autorenew</mat-icon>
          Renewal Terms
        </h4>
        <div class="grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4">
          <div class="flex flex-col gap-1">
            <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Days to Renewal</span>
            <span class="text-[15px] font-medium"
                  [ngClass]="policy.renewalDays <= 15 ? 'text-red-600 font-semibold' : policy.renewalDays <= 30 ? 'text-orange-600 font-semibold' : 'text-slate-700'">
              {{ policy.renewalDays }} days
            </span>
          </div>
          <div class="flex flex-col gap-1">
            <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Current Cap Rate</span>
            <span class="text-[15px] font-medium text-slate-700">{{ formatPercentage(policy.currentCapRate) }}</span>
          </div>
          <div class="flex flex-col gap-1">
            <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Projected Renewal Rate</span>
            <span class="text-[15px] font-medium text-slate-700">{{ formatPercentage(policy.projectedRenewalRate) }}</span>
          </div>
          @if (policy.currentCapRate && policy.projectedRenewalRate) {
            <div class="col-span-full flex flex-col gap-1">
              <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Rate Change</span>
              <span class="text-[15px] font-medium"
                    [ngClass]="policy.projectedRenewalRate < policy.currentCapRate ? 'text-red-600' : 'text-slate-700'">
                @if (policy.projectedRenewalRate < policy.currentCapRate) {
                  <mat-icon class="align-middle mr-1 text-red-600 !text-lg !w-[18px] !h-[18px]">trending_down</mat-icon>
                  {{ formatPercentage(policy.currentCapRate - policy.projectedRenewalRate) }} decrease
                } @else if (policy.projectedRenewalRate > policy.currentCapRate) {
                  <mat-icon class="align-middle mr-1 text-green-500 !text-lg !w-[18px] !h-[18px]">trending_up</mat-icon>
                  {{ formatPercentage(policy.projectedRenewalRate - policy.currentCapRate) }} increase
                } @else {
                  <mat-icon class="align-middle mr-1 text-slate-400 !text-lg !w-[18px] !h-[18px]">trending_flat</mat-icon>
                  No change
                }
              </span>
            </div>
          }
        </div>
      </div>

      <mat-divider></mat-divider>
    }

    <!-- Riders & Features -->
    <div class="px-6 py-5">
      <h4 class="mb-4 flex items-center gap-2 text-base font-semibold text-slate-800">
        <mat-icon class="text-indigo-500 !text-xl !w-5 !h-5">add_circle</mat-icon>
        Riders & Features
      </h4>
      <div class="flex flex-wrap gap-2">
        @for (rider of getRiders(); track rider) {
          <mat-chip class="!bg-indigo-50 !text-indigo-700 !text-[13px]">{{ rider }}</mat-chip>
        }
      </div>
    </div>

    <mat-divider></mat-divider>

    <!-- Fees & Charges -->
    <div class="px-6 py-5">
      <h4 class="mb-4 flex items-center gap-2 text-base font-semibold text-slate-800">
        <mat-icon class="text-indigo-500 !text-xl !w-5 !h-5">receipt</mat-icon>
        Fees & Charges
      </h4>
      <div class="grid grid-cols-[repeat(auto-fit,minmax(200px,1fr))] gap-4">
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Annual Fee</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatCurrency(policy.annualFee) }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Rider Fee</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatPercentage(policy.riderFee) }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">M&E Fee</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatPercentage(policy.meFee) }}</span>
        </div>
        <div class="flex flex-col gap-1">
          <span class="text-xs uppercase tracking-wider font-medium text-slate-400">Admin Fee</span>
          <span class="text-[15px] font-medium text-slate-700">{{ formatCurrency(policy.adminFee) }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
